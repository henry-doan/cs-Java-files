import java.awt.BorderLayout;
import java.awt.Dimension; 
import java.awt.Graphics; 
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.ArrayList;

import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollBar;

import java.awt.Scrollbar;
import java.awt.event.AdjustmentEvent;
import java.awt.event.AdjustmentListener;

public class minimap extends JPanel {
	
	private static final long serialVersionUID = 1L; 
	private ArrayList<BufferedImage> images; 
	private int frameNumber; 
	private JLabel label;
	
	/** 
	 * Construct a panel with a starter images  
	 * @param img  
	 */ 
	
	public minimap(BufferedImage img) {
		images = new ArrayList<BufferedImage>();
		images.add(img); frameNumber = 0;
		label = new JLabel();
		setLayout(new BorderLayout());
		
		JScrollBar hbar = new JScrollBar(JScrollBar.HORIZONTAL, 30, 20, 0, 300);
	    JScrollBar vbar = new JScrollBar(JScrollBar.VERTICAL, 30, 40, 0, 300);
	    
	    hbar.setUnitIncrement(2);
	    hbar.setBlockIncrement(1);
	    
	    hbar.addAdjustmentListener(new MyAdjustmentListener());
	    vbar.addAdjustmentListener(new MyAdjustmentListener());
	    
	    add(hbar, BorderLayout.SOUTH);
	    add(vbar, BorderLayout.EAST);
	    add(label, BorderLayout.CENTER);
	    
		setPreferredSize(new Dimension(img.getWidth(), img.getHeight()));
	}
	
	class MyAdjustmentListener implements AdjustmentListener {
	    public void adjustmentValueChanged(AdjustmentEvent e) {
	      label.setText("    New Value is " + e.getValue() + "      ");
	      repaint();
	    }
	  }
	/**
	 * Add img to the ArrayList of images  
	 * @param img  
	 */ 
	
	public void add(BufferedImage img) {
		images.add(img);
	}
	
	/**
	 * Cycle through the frames using the % mod operation  
	 */ 
	public void nextFrame() { 
		frameNumber = (frameNumber + 1)%images.size(); 
	}
	
	/** 
	 * Implement the paint method to draw the images  
	 */ 
	@Override   
	public void paintComponent(Graphics g) {
		super.paintComponent(g); 
		g.drawImage(images.get(frameNumber),  0,  0, null);
		// System.out.println("redraw " + frameNumber);
	}
	
	public static void main(String[] args) {
		JFrame frame = new JFrame("Mini Map");
		BufferedImage image = null;
		
		try {                
			image = ImageIO.read(new File("./imgs/minimap.png"));
	    } catch (IOException e) {
	        e.printStackTrace();
	    }
		 frame.getContentPane().add(new minimap(image));		 
		 frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
	     frame.setPreferredSize(new Dimension(300, 300));
	     frame.pack();
	     frame.setVisible(true);
	}

}
