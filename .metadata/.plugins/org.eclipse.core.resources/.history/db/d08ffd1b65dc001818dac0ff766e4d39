package ep;

/*
 * An immutable data type that represents the board for the 8 puzzle.
 * 
 * @author Henry Doan
 * @version October 23, 2018
 */
public class Board {
	private int boardSize;
	private int[][] board;
	
	/*
	 * Construct a board from an N-by-N array of blocks.
	 * 
	 * @param where blocks[i][j] = block in row i, column j
	 */
	public Board(int[][] blocks) {
		// set the size
		boardSize = blocks.length;
		
		// create a new board
		board = new int[boardSize][boardSize];
		
		// copy items over
		for (int row = 0; row < boardSize; row++) {
			for (int col = 0; col < boardSize; col++) {
				board[row][col] = blocks[row][col];
			}
		}
		
	}
	
	/*
	 * Board size N.
	 * 
	 * @return board size
	 */
	public int size() {
		return boardSize;
	}
	
	/*
	 * Number of blocks out of place.
	 * 
	 * @return blocks out of place.
	 */
	public int hamming() {
		int numOutOfPlace = 0;
		
		// check the position to see if it is out of place
		for (int row = 0; row < boardSize; row++) {
			for(int col = 0; col < boardSize; col++) {
				if (board[row][col] != 0 && board[row][col] != row * boardSize + col + 1) {
					numOutOfPlace++;
				}
			}	
		}
		
		return numOutOfPlace;
	}
	
	/*
	 * Sum of Manhattan distances between blocks and goal.
	 * 
	 * @return sum of Manhattan distances.
	 */
	public int manhattan() {
		return 0;
	}
	
	/*
	 * Is this board the goal board?
	 * 
	 * @return true -- boolean on if it is the goal board and no blocks out of place.
	 *         false -- boolean on if it is not the goal board and blocks are out of place.
	 */
	public boolean isGoal() {
		// see if there are blocks out of place or not.
		return hamming() == 0;
	}
	
	/*
	 * Is this board solvable?
	 * 
	 * @return true -- boolean on if the board is able to solve
	 *         false -- boolean on if the board is not able to be solved.
	 */
	public boolean isSolvable() {
		return false;
	}
	
	/*
	 * Does this board equal y?
	 * 
	 * @param y -- an object being compared.
	 * @return true -- boolean on if the board is equal to y.
	 *         false -- boolean on if the board is not equal to y.
	 */
	public boolean equals(Object y) {
		// if the value and objects are the same
		if (this == y && this.getClass() == y.getClass()) {
			return true;
		} 
		
		// cast y to a board 
		Board otherBoard = (Board) y;
		
		// see if all the values are the same of the two compared boards
		for (int row = 0; row < boardSize; row++) {
			for(int col = 0; col < boardSize; col++) {
				if (this.board[row][col] == otherBoard.board[row][col]) {
					return true;
				}
			}	
		}
		
		// else return false
		return false;
	}
	 
	/*
	 * All neighboring boards.
	 * 
	 * @return 
	 */
	public Iterable<Board> neighbors() {
		return null;
	}
	  
	/*
	 * String representation of this board.
	 * 
	 * @return result -- string of 
	 */
	public String toString() {
		StringBuilder s = new StringBuilder();
		s.append(boardSize + "\n");
		for (int i = 0; i < boardSize; i++) {
			for (int j = 0; j < boardSize; j++) {
				s.append(String.format("%2d ", board[i][j]));
		    }
			s.append("\n");
		}
		
		return s.toString();
	}
	
	/*
	 * Unit Testing
	 *
	 */
	public static void main(String[] args) {
		// TODO Auto-generated method stub

	}

}
